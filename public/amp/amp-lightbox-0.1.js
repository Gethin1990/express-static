(window.AMP = window.AMP || []).push(function(AMP) {var process={env:{NODE_ENV:"production"}};var JSCompiler_prototypeAlias,l=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global?global:a}(this);function n(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(l.Object.defineProperties){var e=l.Object.getOwnPropertyDescriptor(b,d);e&&l.Object.defineProperty(a,d,e)}else a[d]=b[d]}var q=null,t="";
function u(){if(window.context&&window.context.mode)return window.context.mode;var a=!!("localhost"==location.hostname||location.ancestorOrigins&&location.ancestorOrigins[0]&&0==location.ancestorOrigins[0].indexOf("http://localhost:"))&&!!document.querySelector('script[src*="/dist/"],script[src*="/base/"]');var b=location.originalHash||location.hash,c=Object.create(null);if(b){if(0==b.indexOf("?")||0==b.indexOf("#"))b=b.substr(1);for(var b=b.split("&"),d=0;d<b.length;d++){var e=b[d],f=e.indexOf("="),
h;-1!=f?(h=decodeURIComponent(e.substring(0,f)).trim(),e=decodeURIComponent(e.substring(f+1)).trim()):(h=decodeURIComponent(e).trim(),e="");h&&(c[h]=e)}}var k=c;t||(c=window,t=a?"1467308799816":c.AMP_CONFIG&&c.AMP_CONFIG.v?c.AMP_CONFIG.v:"1467308799816");return{localDev:a,development:!("1"!=k.development&&!window.AMP_DEV_MODE),filter:k.filter,minified:"production"==process.env.NODE_ENV,test:!!window.AMP_TEST,log:k.log,version:t}};var v=(new Date).getTime();function w(a,b,c){this.win=a.AMP_TEST_IFRAME?a.parent:a;this.fa=b;this.i=this.win.console&&this.win.console.log&&"0"!=(q?q:q=u()).log?this.win.ENABLE_LOG?4:this.fa(q?q:q=u()):0;this.I=c||""}function x(a,b,c,d){if(0!=a.i){var e=a.win.console.log;"ERROR"==c?e=a.win.console.error||e:"INFO"==c?e=a.win.console.info||e:"WARN"==c&&(e=a.win.console.warn||e);d.unshift((new Date).getTime()-v,"["+b+"]");e.apply(a.win.console,d)}}JSCompiler_prototypeAlias=w.prototype;
JSCompiler_prototypeAlias.isEnabled=function(){return 0!=this.i};JSCompiler_prototypeAlias.fine=function(a,b){4<=this.i&&x(this,a,"FINE",Array.prototype.slice.call(arguments,1))};JSCompiler_prototypeAlias.info=function(a,b){3<=this.i&&x(this,a,"INFO",Array.prototype.slice.call(arguments,1))};JSCompiler_prototypeAlias.warn=function(a,b){2<=this.i&&x(this,a,"WARN",Array.prototype.slice.call(arguments,1))};
JSCompiler_prototypeAlias.error=function(a,b){if(1<=this.i)x(this,a,"ERROR",Array.prototype.slice.call(arguments,1));else{var c=y.apply(null,Array.prototype.slice.call(arguments,1));z(this,c);this.win.setTimeout(function(){throw c;})}};JSCompiler_prototypeAlias.createError=function(a){var b=y.apply(null,arguments);z(this,b);return b};
JSCompiler_prototypeAlias.assert=function(a,b,c){var d;if(!a){var e=(b||"Assertion failed").split("%s"),f=e.shift(),h=f,k=[];""!=f&&k.push(f);for(f=2;f<arguments.length;f++){var g=arguments[f];g&&g.tagName&&(d=g);var r=e.shift();k.push(g);var p=r.trim();""!=p&&k.push(p);var p=h,m;m=g;m=m instanceof Element?m.tagName.toLowerCase()+(m.id?"#"+m.id:""):m;h=p+(m+r)}f=Error(h);f.fromAssert=!0;f.associatedElement=d;f.messageArray=k;z(this,f);throw f;}return a};
JSCompiler_prototypeAlias.assertEnumValue=function(a,b,c){for(var d in a)if(a[d]==b)return a[d];this.assert(!1,'Unknown %s value: "%s"',c||"enum",b)};function z(a,b){a.I&&(b.message?-1==b.message.indexOf(a.I)&&(b.message+=a.I):b.message=a.I)}function y(a){for(var b=null,c="",d=0;d<arguments.length;d++){var e=arguments[d];e instanceof Error&&!b?b=e:(c&&(c+=" "),c+=e)}b?c&&(b.message=c+": "+b.message):b=Error(c);return b}
var A=new w(window,function(a){var b=parseInt(a.log,10);return a.development||1<=b?4:0},"\u200b\u200b\u200b");new w(window,function(a){a=parseInt(a.log,10);return 3<=a?4:2<=a?3:0});function B(a){this.win=a;this.ka=Promise.resolve();this.la=0;this.M={};this.H=this.now()}JSCompiler_prototypeAlias=B.prototype;JSCompiler_prototypeAlias.now=function(){return Date.now()};JSCompiler_prototypeAlias.timeSinceStart=function(){return this.now()-this.H};JSCompiler_prototypeAlias.delay=function(a,b){var c=this;if(!b){var d="p"+this.la++;this.ka.then(function(){c.M[d]?delete c.M[d]:a()});return d}return this.win.setTimeout(a,b)};
JSCompiler_prototypeAlias.cancel=function(a){"string"==typeof a?this.M[a]=!0:this.win.clearTimeout(a)};JSCompiler_prototypeAlias.promise=function(a,b){var c=this,d=null;return(new Promise(function(e,f){d=c.delay(function(){d=-1;e(b)},a);-1==d&&f(Error("Failed to schedule timer."))})).catch(function(a){-1!=d&&c.cancel(d);throw a;})};
JSCompiler_prototypeAlias.timeoutPromise=function(a,b,c){var d=this,e=null,f=(new Promise(function(b,f){e=d.delay(function(){e=-1;f(A.createError(c||"timeout"))},a);-1==e&&f(Error("Failed to schedule timer."))})).catch(function(a){-1!=e&&d.cancel(e);throw a;});return b?Promise.race([f,b]):f};var C=new B(window);function D(a,b){var c;return E(a,b,c?function(){return c(a)}:void 0)}function E(a,b,c){var d=a,e=d.services;e||(e=d.services={});var f=e;(d=f[b])||(d=f[b]={obj:null,promise:null,resolve:null});d.obj||(d.obj=c(),d.promise||(d.promise=Promise.resolve(d.obj)),d.resolve&&d.resolve(d.obj));return d.obj};var F=Object.create(null),G="Webkit webkit Moz moz ms O o".split(" ");function H(a){var b={position:"fixed",zIndex:1E3,top:0,left:0,bottom:0,right:0},c;for(c in b){var d=a,e=b[c],f;f=d.style;var h=c,k=F[h];if(!k){k=h;if(void 0===f[h]){var g;g=h;g=g.charAt(0).toUpperCase()+g.slice(1);a:{for(var r=0;r<G.length;r++){var p=G[r]+g;if(void 0!==f[p]){g=p;break a}}g=""}void 0!==f[g]&&(k=g)}F[h]=k}(f=k)&&(d.style[f]=e)}};function I(){this.m=[]}I.prototype.add=function(a){var b=this;this.m.push(a);return function(){b.remove(a)}};I.prototype.remove=function(a){a=this.m.indexOf(a);-1<a&&this.m.splice(a,1)};I.prototype.fire=function(a){for(var b=this.m,c=0;c<b.length;c++)(0,b[c])(a)};I.prototype.getHandlerCount=function(){return this.m.length};function J(a,b){var c=this;this.ea=a;this.da=b||0;this.u=-1;this.O=0;this.U=!1;this.ba=function(){return c.G()}}J.prototype.isPending=function(){return-1!=this.u};J.prototype.schedule=function(a){a=a||this.da;this.U&&10>a&&(a=10);var b=C.now()+a;return!this.isPending()||-10>b-this.O?(this.cancel(),this.O=b,this.u=C.delay(this.ba,a),!0):!1};J.prototype.G=function(){this.u=-1;this.O=0;this.U=!0;this.ea();this.U=!1};J.prototype.cancel=function(){this.isPending()&&(C.cancel(this.u),this.u=-1)};function K(a,b,c,d){this.type=a;this.data=b;this.time=c;this.event=d}
function L(a){this.g=a;this.b=[];this.B=[];this.f=[];this.a=[];this.c=null;this.K=!1;this.G=new J(this.Z.bind(this));this.aa=new I;this.P=Object.create(null);this.Y=this.ja.bind(this);this.W=this.ha.bind(this);this.X=this.ia.bind(this);this.V=this.ga.bind(this);this.g.addEventListener("touchstart",this.Y);this.g.addEventListener("touchend",this.W);this.g.addEventListener("touchmove",this.X);this.g.addEventListener("touchcancel",this.V)}
function M(a){var b=a.__AMP_Gestures;b||(b=new L(a),a.__AMP_Gestures=b);return b}JSCompiler_prototypeAlias=L.prototype;JSCompiler_prototypeAlias.cleanup=function(){this.g.removeEventListener("touchstart",this.Y);this.g.removeEventListener("touchend",this.W);this.g.removeEventListener("touchmove",this.X);this.g.removeEventListener("touchcancel",this.V);this.G.cancel()};
JSCompiler_prototypeAlias.onGesture=function(a,b){var c=new a(this),d=c.getType(),e=this.P[d];e||(this.b.push(c),e=new I,this.P[d]=e);return e.add(b)};JSCompiler_prototypeAlias.onPointerDown=function(a){return this.aa.add(a)};JSCompiler_prototypeAlias.ja=function(a){var b=C.now();this.K=!1;this.aa.fire(a);for(var c=0;c<this.b.length;c++)if(!this.f[c]&&(this.a[c]&&this.a[c]<b&&N(this,c),this.b[c].onTouchStart(a))){var d=c;this.B[d]=!0;this.a[d]=0}O(this,a)};
JSCompiler_prototypeAlias.ia=function(a){for(var b=C.now(),c=0;c<this.b.length;c++)this.B[c]&&(this.a[c]&&this.a[c]<b?N(this,c):this.b[c].onTouchMove(a)||N(this,c));O(this,a)};JSCompiler_prototypeAlias.ha=function(a){for(var b=C.now(),c=0;c<this.b.length;c++)this.B[c]&&(this.a[c]&&this.a[c]<b?N(this,c):(this.b[c].onTouchEnd(a),(!this.a[c]||this.a[c]<b)&&N(this,c)));O(this,a)};JSCompiler_prototypeAlias.ga=function(a){for(var b=0;b<this.b.length;b++){var c=b;this.f[c]=0;N(this,c)}O(this,a)};
function O(a,b){var c=!!a.c||a.K;a.K=!1;if(!c)for(var d=C.now(),e=0;e<a.b.length;e++)if(a.f[e]||a.a[e]&&a.a[e]>=d){c=!0;break}c&&(b.stopPropagation(),b.preventDefault());a.$&&(a.$=!1,a.Z())}
JSCompiler_prototypeAlias.Z=function(){for(var a=C.now(),b=-1,c=0;c<this.b.length;c++)if(!this.f[c])this.a[c]&&this.a[c]<a&&N(this,c);else if(-1==b||this.f[c]>this.f[b])b=c;if(-1!=b){for(var d=0,c=0;c<this.b.length;c++)!this.f[c]&&this.B[c]&&(d=Math.max(d,this.a[c]-a));if(2>d){for(var a=b,c=this.b[a],e=0;e<this.b.length;e++)if(e!=a){var f=e;this.f[f]=0;N(this,f)}this.f[a]=0;this.a[a]=0;this.c=c;c.acceptStart()}else this.G.schedule(d)}};
function N(a,b){a.B[b]=!1;a.a[b]=0;a.f[b]||a.b[b].acceptCancel()}function P(a,b){this.ma=a;this.F=b}JSCompiler_prototypeAlias=P.prototype;JSCompiler_prototypeAlias.getType=function(){return this.ma};JSCompiler_prototypeAlias.signalReady=function(a){var b=this.F;if(b.c)this.acceptCancel();else{for(var c=C.now(),d=0;d<b.b.length;d++)b.b[d]==this&&(b.f[d]=c+a,b.a[d]=0);b.$=!0}};
JSCompiler_prototypeAlias.signalPending=function(a){var b=this.F;if(b.c)this.acceptCancel();else for(var c=C.now(),d=0;d<b.b.length;d++)b.b[d]==this&&(b.a[d]=c+a)};JSCompiler_prototypeAlias.signalEnd=function(){var a=this.F;a.c==this&&(a.c=null,a.K=!0)};JSCompiler_prototypeAlias.signalEmit=function(a,b){var c=this.F.P[this.getType()];c&&c.fire(new K(this.getType(),a,C.now(),b))};JSCompiler_prototypeAlias.acceptStart=function(){};JSCompiler_prototypeAlias.acceptCancel=function(){};
JSCompiler_prototypeAlias.onTouchStart=function(){return!1};JSCompiler_prototypeAlias.onTouchMove=function(){return!1};JSCompiler_prototypeAlias.onTouchEnd=function(){};function Q(a,b,c){1>b&&(b=1);var d=a/b,e=.5+Math.min(b/33.34,.5);return d*e+c*(1-e)};function R(a,b,c,d){P.call(this,a,b);this.C=c;this.J=d;this.c=!1;this.l=this.j=this.R=this.D=this.H=this.T=this.S=this.s=this.o=this.A=this.w=0}n(R,P);JSCompiler_prototypeAlias=R.prototype;JSCompiler_prototypeAlias.onTouchStart=function(a){a=a.touches;if(!a||1!=a.length)return!1;this.H=C.now();this.w=a[0].clientX;this.A=a[0].clientY;return!0};
JSCompiler_prototypeAlias.onTouchMove=function(a){var b=a.changedTouches||a.touches;if(b&&1==b.length){var c=b[0].clientX,b=b[0].clientY;this.o=c;this.s=b;if(this.c)S(this,!1,!1,a);else if(a=Math.abs(c-this.w),c=Math.abs(b-this.A),this.C&&this.J)(8<=a||8<=c)&&this.signalReady(-10);else if(this.C)if(8<=a&&a>c)this.signalReady(-10);else{if(8<=c)return!1}else if(this.J)if(8<=c&&c>a)this.signalReady(-10);else{if(8<=a)return!1}else return!1}return!0};
JSCompiler_prototypeAlias.onTouchEnd=function(a){this.c&&(this.c=!1,S(this,!1,!0,a),this.signalEnd())};JSCompiler_prototypeAlias.acceptStart=function(){this.c=!0;this.S=this.w;this.T=this.A;this.R=this.H;this.w=this.o;this.A=this.s;S(this,!0,!1,null)};JSCompiler_prototypeAlias.acceptCancel=function(){this.c=!1};
function S(a,b,c,d){a.D=C.now();var e=a.D-a.R;if(!c&&4<e||c&&16<e)a.j=Q(a.o-a.S,e,a.j),a.l=Q(a.s-a.T,e,a.l),a.j=1E-4<Math.abs(a.j)?a.j:0,a.l=1E-4<Math.abs(a.l)?a.l:0,a.S=a.o,a.T=a.s,a.R=a.D;a.signalEmit({first:b,last:c,time:a.D,deltaX:a.C?a.o-a.w:0,deltaY:a.J?a.s-a.A:0,velocityX:a.C?a.j:0,velocityY:a.J?a.l:0},d)}function T(a){R.call(this,"swipe-xy",a,!0,!0)}n(T,R);function U(a){AMP.BaseElement.apply(this,arguments)}n(U,AMP.BaseElement);JSCompiler_prototypeAlias=U.prototype;JSCompiler_prototypeAlias.isLayoutSupported=function(a){return"nodisplay"==a};
JSCompiler_prototypeAlias.buildCallback=function(){var a=this;H(this.element);var b=this.getRealChildren();this.h=this.element.ownerDocument.createElement("div");this.applyFillContent(this.h);this.element.appendChild(this.h);b.forEach(function(b){a.h.appendChild(b)});this.registerAction("close",this.close.bind(this));var c=M(this.element);c.onGesture(T,function(){});this.N=-1};JSCompiler_prototypeAlias.layoutCallback=function(){return Promise.resolve()};
JSCompiler_prototypeAlias.activate=function(){var a=this;this.L=this.ca.bind(this);this.getWin().document.documentElement.addEventListener("keydown",this.L);this.getViewport().enterLightboxMode();this.mutateElement(function(){a.element.style.display="";a.element.style.opacity=0;a.element.style.transition="opacity 0.1s ease-in";D(a.getWin(),"vsync").mutate(function(){a.element.style.opacity=""})}).then(function(){a.updateInViewport(a.h,!0);a.scheduleLayout(a.h)});D(this.element.ownerDocument.defaultView,
"history").push(this.close.bind(this)).then(function(b){a.N=b})};JSCompiler_prototypeAlias.ca=function(a){27==a.keyCode&&this.close()};JSCompiler_prototypeAlias.close=function(){this.getViewport().leaveLightboxMode();this.element.style.display="none";-1!=this.N&&D(this.element.ownerDocument.defaultView,"history").pop(this.N);this.getWin().document.documentElement.removeEventListener("keydown",this.L);this.L=null;this.schedulePause(this.h)};AMP.registerElement("amp-lightbox",U);
});
//# sourceMappingURL=amp-lightbox-0.1.js.map

